---
import { Button, Icon } from 'studiocms:ui/components';
import Layout from '../layouts/Layout.astro';
import { Card } from 'studiocms:ui/components';
import { Image } from 'astro:assets';

import AWS from '@/assets/icons/aws.svg';
import Coolify from '@/assets/icons/coolify.svg';
import Docker from '@/assets/icons/docker.svg';
import Netlify from '@/assets/icons/netlify.svg';
import Node from '@/assets/icons/node.svg';
import Vercel from '@/assets/icons/vercel.svg';
import NPM from '@/assets/npm.svg';
import Discord from '@/assets/discord.svg';
import GitHub from '@/assets/github.svg';

import DevIconPattern from '@/assets/developer-icon-pattern.svg';
import MarketerIconPattern from '@/assets/marketer-icon-pattern.svg';

import TursoFullLogo from '@/assets/turso-logo-illustrated.svg';
import Skip2FullLogo from '@/assets/skip2-wordmark-red.svg';
import EcosystemSection from '@/components/EcosystemSection.astro';

import ApolloDefaultExpression from '@/assets/apollo-default.png';
import ApolloHappyExpression from '@/assets/apollo-happy.png';
---

<Layout>
	<section class="hero">
		<a href="/blog/beta-8-announcement" class="announcement-badge">
			<span>Beta 8 out now!</span>
			<Icon name='arrow-right-20-solid' width={16} height={16} />
		</a>
		<h1>The Astro-native CMS for all your needs.</h1>
		<p>
			StudioCMS is the all-in-one content management solution for your next Astro project.
		</p>
		<div class="hero-cta">
			<code class="code-cta" id="install-cta">
				npx create studiocms
				<Icon name='document-duplicate-20-solid' class='active' id='copy-icon' width={16} height={16} />
				<Icon name='check-20-solid' id='copy-check' width={16} height={16} />
			</code>
			<Button color='primary'>
				Try the demo!
			</Button>
		</div>
	</section>
	<div class="video-player">Video here!</div>
	<section class="target-groups">
		<Card class="target-group-div">
			<h2>For Developers.</h2>
			<p>StudioCMS offers lorem ipsum solor dit amet. StudioCMS offers lorem ipsum solor dit amet.</p>
			<div class="reasons-list">
				<div class="reason">
					<div class="reason-header">
						<Icon name='check-20-solid' width={20} height={20} />
						<h3>Reason</h3>
					</div>
					<p>Small description with text that is up to eighty characters long.</p>
				</div>
				<div class="reason">
					<div class="reason-header">
						<Icon name='check-20-solid' width={20} height={20} />
						<h3>Reason</h3>
					</div>
					<p>Small description with text that is up to eighty characters long.</p>
				</div>
			</div>
			<Button href='/' color='mono'>
				Read more
			</Button>
			<DevIconPattern class="icon-deco" />
		</Card>
		<Card class="target-group-div">
			<h2>For Marketers.</h2>
			<p>StudioCMS offers lorem ipsum solor dit amet. StudioCMS offers lorem ipsum solor dit amet.</p>
			<div class="reasons-list">
				<div class="reason">
					<div class="reason-header">
						<Icon name='check-20-solid' width={20} height={20} />
						<h3>Reason</h3>
					</div>
					<p>Small description with text that is up to eighty characters long.</p>
				</div>
				<div class="reason">
					<div class="reason-header">
						<Icon name='check-20-solid' width={20} height={20} />
						<h3>Reason</h3>
					</div>
					<p>Small description with text that is up to eighty characters long.</p>
				</div>
			</div>
			<Button href='/' color='mono'>
				Read more
			</Button>
			<MarketerIconPattern class="icon-deco" />
		</Card>
		<Card class="target-group-div enterprise">
			<h2>For Enterprises.</h2>
			<p>
				StudioCMS offers lorem ipsum solor dit amet. StudioCMS offers lorem ipsum solor dit amet.
				StudioCMS offers lorem ipsum solor dit amet. StudioCMS offers lorem ipsum solor dit amet.
			</p>
			<div class="reasons-list">
				<div class="reason">
					<div class="reason-header">
						<Icon name='check-20-solid' width={20} height={20} />
						<h3>Reason</h3>
					</div>
					<p>Small description with text that is up to eighty characters long.</p>
				</div>
				<div class="reason">
					<div class="reason-header">
						<Icon name='check-20-solid' width={20} height={20} />
						<h3>Reason</h3>
					</div>
					<p>Small description with text that is up to eighty characters long.</p>
				</div>
				<div class="reason">
					<div class="reason-header">
						<Icon name='check-20-solid' width={20} height={20} />
						<h3>Reason</h3>
					</div>
					<p>Small description with text that is up to eighty characters long.</p>
				</div>
				<div class="reason">
					<div class="reason-header">
						<Icon name='check-20-solid' width={20} height={20} />
						<h3>Reason</h3>
					</div>
					<p>Small description with text that is up to eighty characters long.</p>
				</div>
			</div>
			<Button href='/' color='mono'>
				Read more
			</Button>
		</Card>
	</section>
	<section class="hosting-methods">
		<h2>Server <span class="keyword">and</span> Serverless</h2>
		<p class="balanced">
			StudioCMS stores all of it's data in a remote libSQL instance, <br>
			so you can deploy your site to serverless hosts and enjoy the full editing capabilities.
		</p>
		<div class="hosting-providers">
			<Card as='a' href='/' class="hosting-provider" aria-label="NodeJS Logo">
				<Node />
				<Node class='glow-layer' />
			</Card>
			<Card as='a' href='/' class="hosting-provider" aria-label="Coolify Logo">
				<Coolify />
				<Coolify class='glow-layer' />
			</Card>
			<Card as='a' href='/' class="hosting-provider" aria-label="Docker Logo">
				<Docker />
				<Docker class='glow-layer' />
			</Card>
			<Card as='a' href='/' class="hosting-provider" aria-label="Netlify Logo">
				<Netlify />
				<Netlify class='glow-layer' />
			</Card>
			<Card as='a' href='/' class="hosting-provider" aria-label="Vercel Logo">
				<Vercel />
				<Vercel class='glow-layer' />
			</Card>
			<Card as='a' href='/' class="hosting-provider" aria-label="Amazon Web Services Logo">
				<AWS />
				<AWS class='glow-layer' />
			</Card>
		</div>
	</section>
	<section class="plugins-section">
		<h2>Extensible by Design</h2>
		<p>Lorem Ipsum, Tailwind-style Demo goes here</p>
	</section>
	<section class="banner">
		<p>Join a community of developers already using StudioCMS.</p>
		<div class="stats-container">
			<div class="stat">
				<Discord class="stat-icon" />
				<span class="stat-text keyword">90+</span>
				<span class="stat-desc">Discord community members</span>
			</div>
			<div class="stat">
				<NPM class="stat-icon" />
				<span class="stat-text keyword">450+</span>
				<span class="stat-desc">Monthly npm downloads</span>
			</div>
			<div class="stat">
				<GitHub class="stat-icon" />
				<span class="stat-text keyword">360+</span>
				<span class="stat-desc">GitHub stars</span>
			</div>
			<Image
				src={ApolloHappyExpression}
				alt="Our mascot, Apollo, happily looking at the statistics."
				width={177.5}
				loading="lazy"
				class='apollo-banner-deco'
				quality={100}
			/>
		</div>
	</section>
	<section class="social-proof">
		<h2>Trusted by the community</h2>
		<span>Social Proof</span>
	</section>
	<EcosystemSection />
	<section class="blog-showcase">
		<h2>Keep up With What's Happening</h2>
		<span>latest blog article goes here</span>
	</section>
	<section class="final-cta"></section>
	<section class="sponsors">
		<h2>Sponsors</h2>
		<p>StudioCMS is free, open source software, brought to you by:</p>
		<div class="sponsors-grid">
			<a href="https://tur.so/studiocms" class="sponsor turso">
				<TursoFullLogo />
				<p>Official Database Sponsor</p>
			</a>
			<a href="https://www.skip2.net/?utm_source=studiocms" class="sponsor skip2">
				<Skip2FullLogo />
				<p>Official Network Sponsor</p>
			</a>
		</div>
	</section>
	<div>
		<Image
			src={ApolloDefaultExpression}
			alt="Our mascot, Apollo, poking out from behind the footer Element."
			width={160}
			loading="lazy"
			class='apollo-footer-deco'
			quality={100}
		/>
	</div>
</Layout>
<script>
	const copyBtn = document.querySelector<HTMLButtonElement>('#install-cta')!;
	const copyIcon = document.querySelector<HTMLElement>('#copy-icon')!;
	const successIcon = document.querySelector<HTMLElement>('#copy-check')!;

	let timeout: NodeJS.Timeout | null = null;

	copyBtn.addEventListener('click', () => {
		if (timeout) {
			clearTimeout(timeout);
		}

		navigator.clipboard.writeText('npx create studiocms');
		copyIcon.classList.remove('active');
		successIcon.classList.add('active');

		timeout = setTimeout(() => {
			copyIcon.classList.add('active');
			successIcon.classList.remove('active');
		}, 3000);
	});
</script>
<style>
	section:not(.banner), .video-player {
		max-width: var(--page-width);
		margin: 0 auto;
		margin-bottom: 8rem;
		text-align: center;
	}
	
	section.hero {
		width: 100%;
		text-align: center;
		height: 60vh;
		display: flex;
		flex-direction: column;
		align-items: center;
		justify-content: center;
		gap: 1rem;
		position: relative;
		margin-bottom: 0;
	}

	section.banner {
		margin-bottom: 8rem;
	}

	h2 {
		font-size: 2em;
		margin-bottom: .5rem;
	}

	.announcement-badge {
		display: flex;
		flex-direction: row;
		align-items: center;
		gap: .5rem;
		outline: 1px solid hsl(var(--primary-base));
		border-radius: 99px;
		padding: .25rem .75rem;
		background-color: hsl(var(--primary-flat));
		transition: all .15s ease;
		color: hsl(var(--text-normal));
		text-decoration: none;
		font-size: .825em;
	}

	.announcement-badge:hover {
		background-color: hsl(var(--primary-flat-hover));
	}

	.hero h1 {
		font-size: 2.5em;
	}

	.hero p {
		font-size: 1.25em;
	}

	.hero-cta {
		display: flex;
		flex-direction: row;
		gap: 1.5rem;
		align-items: center;
	}

	.code-cta {
		display: flex;
		flex-direction: row;
		align-items: center;
		gap: .75rem;
		padding: .5rem .75rem;
		height: 40px;
		background-color: hsl(var(--background-step-1));
		border: 1px solid hsl(var(--border));
		border-radius: var(--radius-md);
		cursor: pointer;
	}

	#copy-icon, #copy-check {
		display: none;
	}

	#copy-icon.active, #copy-check.active {
		display: block;
	}

	#copy-check.active {
		color: hsl(var(--success-base)) !important;
	}

	.video-player {
		width: 100%;
		aspect-ratio: 16 / 9;
		background-color: hsl(var(--background-step-1));
		display: flex;
		align-items: center;
		justify-content: center;
		border-radius: 1.25rem;
		z-index: 5;
	}

	.target-groups {
		display: flex;
		flex-direction: row;
		flex-wrap: wrap;
		gap: 1rem;
	}

	.target-group-div {
		width: calc(50% - .5rem);
		background-color: hsl(var(--background-step-1));
		transition: all .15s ease;
		text-align: left;
		overflow: hidden;
		border-radius: 1.25rem;

		--reason-cols: 2;
	}

	.target-group-div:hover {
		border: 1px solid hsl(var(--primary-base));
	}

	.target-group-div h3 {
		font-weight: 500;
	}

	.target-group-div.enterprise {
		width: 100%;

		--reason-cols: 4;
	}

	.reasons-list {
		width: 100%;
		display: grid;
		grid-template-columns: repeat(var(--reason-cols), 1fr);
		gap: 1rem;
	}

	.reason {
		display: flex;
		flex-direction: column;
		gap: .5rem;
		background-color: hsl(var(--background-step-2));
		padding: .75rem;
		border-radius: .5rem;
	}

	.reason-header {
		display: flex;
		flex-direction: row;
		gap: .5rem;
		align-items: center;
	}

	.reason-header svg {
		color: hsl(var(--primary-base));
	}

	.icon-deco {
		position: absolute;
		filter: saturate(0);
		opacity: .5;
		rotate: -45deg;
		top: 60%;
		left: 60%;
		z-index: -1;
		transition: all .15s ease;
	}

	.target-group-div:hover .icon-deco {
		filter: saturate(1);
		opacity: 1;
		transform: translateY(.5rem);
		transform: translatex(.5rem);
	}

	.hosting-methods {
		text-align: center;
	}

	.hosting-providers {
		width: 100%;
		display: flex;
		justify-content: space-evenly;
		margin-top: 3rem;
	}

	.hosting-provider {
		width: 5rem;
		height: 5rem;
		display: block;
		background-color: hsl(var(--background-step-1));
		transition: all .15s ease;
		border-radius: 1.25rem;
	}

	.hosting-provider:hover {
		background-image: radial-gradient(
			hsl(var(--background-step-1)),
			hsl(var(--background-step-3))
		);
		border: 1px solid hsl(var(--primary-base));
	}
	
	.hosting-provider svg {
		max-width: 4.5rem;
		max-height: 4.5rem;
	}

	.hosting-provider svg.glow-layer {
		position: absolute;
		top: 50%;
		left: 50%;
		transform: translate(-50%, -50%);
		opacity: 0;
		transition: all .15s ease;
		filter: blur(4px);
		width: 2.5rem;
		height: 2.5rem;
	}

	.hosting-provider:hover svg.glow-layer {
		opacity: .5;
	}

	section.banner {
		width: 100%;
		background-color: hsl(var(--background-step-1));
		padding: 2rem calc((100vw - var(--page-width)) / 2);
		text-align: center;
	}

	.stats-container {
		display: flex;
		flex-direction: row;
		gap: 1.5rem;
		margin: 0 auto;
		margin-top: 1.5rem;
		position: relative;
	}

	.apollo-banner-deco {
		position: absolute;
		top: 0;
		right: 0;
		z-index: -1;
		transform: translate(50%, -50%);
	}

	.stat {
		width: 100%;
		border: 1px solid hsl(var(--border));
		background-color: hsl(var(--background-step-2));
		display: flex;
		flex-direction: column;
		gap: 1rem;
		text-align: left;
		padding: 1.5rem;
		border-radius: 1.25rem;
	}

	.stat-icon {
		width: 2rem;
		height: auto;
	}

	.stat-text {
		font-size: 3em;
		font-weight: bolder;
	}

	.sponsors {
		text-align: center;
	}

	.sponsors-grid {
		width: 100%;
		border-radius: 1.25rem;
		border: 1px solid hsl(var(--border));
		display: grid;
		grid-template-columns: repeat(4, 1fr);
		overflow: hidden;
		gap: 1px;
		background-color: hsl(var(--border));
		margin-top: 1rem;
	}

	.sponsor {
		display: flex;
		flex-direction: column;
		gap: 1rem;
		align-items: center;
		justify-content: center;
		padding: 1rem;
		background-color: hsl(var(--background-step-1));
		transition: all .15s ease;
		text-decoration: none;
		color: hsl(var(--text-muted));
	}

	.sponsor:hover {
		background-color: hsl(var(--background-step-2));
	}

	.sponsor svg {
		max-width: 100%;
		height: 8rem;
	}

	.sponsor.turso {
		grid-column: 1 / span 2;
	}

	.sponsor.skip2 {
		grid-column: 3 / span 2;
	}

	.apollo-footer-deco {
		position: relative;
		left: 50vw;
		transform: translate(-50%, 30%);
	}
</style>
<style is:global>	
	.hosting-provider .sui-card-body {
		display: flex;
		align-items: center;
		justify-content: center;
		width: 100%;
		height: 100%;
		padding: 1.5rem;
	}

	.target-group-div .sui-card-body {
		display: flex;
		flex-direction: column;
		gap: 1rem;
		padding: 1.5rem;

		h2 {
			margin-bottom: 0;
		}
	}

	main {
		width: 100vw !important;
	}

	.target-group-div .sui-button {
		width: fit-content !important;
	}
</style>